# Симуляція простого калькулятора за допомогою Lex та Yacc

Цей проект реалізує простий арифметичний калькулятор, використовуючи **Lex** для побудови лексичного аналізатора і **Yacc** для створення синтаксичного аналізатора. Калькулятор може виконувати базові арифметичні операції, враховуючи порядок дій та дужки, а також має функціонал обробки помилок.

---

## Можливості

- **Базові арифметичні операції**: підтримка `+`, `-`, `*`, `/`.
- **Дужки**: підтримка виразів із використанням круглих дужок `(` і `)`.
- **Унарний мінус**: обробка виразів на кшталт `-5 + 3`.
- **Обробка помилок**:
  - Виявлення та пропуск невірних символів.
  - Обробка ділення на нуль із відповідним повідомленням.

---

## Файли

### `lexer.l` – Лексичний аналізатор

Лексер відповідає за розпізнавання окремих токенів у вхідному потоці:
- Розпізнає числа, оператори (`+`, `-`, `*`, `/`) та дужки.
- Ігнорує пробіли і табуляції.
- Виявляє невірні символи, пропускаючи їх до кінця рядка.

### `parser.y` – Синтаксичний аналізатор

Парсер визначає граматику арифметичних виразів:
- Використовує оператори із заданими пріоритетами.
- Враховує дужки для зміни порядку дій.
- Має обробку помилок, наприклад, для ділення на нуль.

---

## Запуск

Програма запускається на **WSL (Windows Subsystem for Linux)**, але потрібно встановити необхідні пакети, це можна зробити наступної командою:
```bash
sudo apt update
sudo apt install flex bison gcc
```

---

### Кроки для запуску

1. **Створення лексичного аналізатора**:
   ```bash
   sudo flex lexer.l
   ```

2. **Створення синтаксичного аналізатора**:
   ```bash
   sudo bison -d parser.y
   ```

3. **Компіляція програми**:
   ```bash
   sudo gcc lex.yy.c parser.tab.c -o calculator -lm -lfl
   ```

4. **Запуск калькулятора**:
   ```bash
   ./calculator
   ```

---

## Як це працює

### Лексичний аналізатор (`lexer.l`)

Лексер перетворює вхідний текст на послідовність токенів:
- **Числа**: `[0-9]+` зберігаються як цілі числа і передаються парсеру.
- **Оператори та дужки**: кожен символ (`+`, `-`, `*`, `/`, `(`, `)`) обробляється як окремий токен.
- **Новий рядок**: визначає завершення виразу.
- **Помилки**: невідомі символи ігноруються, і лексер пропускає весь рядок.

### Синтаксичний аналізатор (`parser.y`)

Парсер визначає структуру виразів і обчислює їх значення:
- **Граматика**:
  - `input`: приймає вирази, завершені символом нового рядка.
  - `expr`: підтримує арифметичні операції, дужки і унарний мінус.
- **Пріоритети операторів**:
  - `*` і `/` мають вищий пріоритет, ніж `+` і `-`.
  - Унарний мінус має найвищий пріоритет.
- **Обробка ділення на нуль**: виводиться повідомлення про помилку, а результат обчислення встановлюється в `0`.

### Головний цикл програми

У `main` виконується нескінченний цикл:
1. Користувач вводить вираз.
2. Програма парсить і обчислює вираз.
3. Виводиться результат, після чого програма знову очікує введення.

---

## Приклад використання

![image](https://github.com/user-attachments/assets/2178d067-06be-4fdb-9cfc-9024d2852c7b)


---

## Обмеження

- Підтримуються лише цілі числа.
- Немає обробки десяткових дробів.
- Для завершення програми потрібно вручну натиснути `Ctrl+Z`.
